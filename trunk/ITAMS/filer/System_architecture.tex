\chapter{System architecture}
The system architecture is explained in the following chapter.

\section{System description}
%%Beskrivelse af systemet og hvad det kan.
The system can be split up to 4 subsystem: The magnetometer, the screen, the GPS module and the CPU. Together they form a system with a screen that reports your geographical location and the way you are heading. 

\section{System boundary}
%%Hvor gr√¶nserne i systemet er pt


\section{System block diagram}
The General system can be by the following block definition diagram:\\
\begin{figure}[H]
	\centering
	\includegraphics[width=.8\textwidth]{billeder/SystemBDD}
	\caption{Block Definition Diagram of the system}
	\label{bdd:system}
\end{figure}

\subsection{CPU}
We have chosen to work with the ATmega32 microcontroller. This will form the basis for our CPU. It has the following blocks:\\

\section{System block diagram}
The General system can be by the following block definition diagram:\\
\begin{figure}[H]
	\centering
	\includegraphics[width=.8\textwidth]{billeder/CPUBDD}
	\caption{Block Definition Diagram of the CPU}
	\label{bdd:system}
\end{figure}

This will lead us to use the following pins:\\
Logic levels are written as 0 - 5 V.\\

\begin{table}[H]
\centering
    \begin{tabular}{|l|l|l|l|}
    \hline
    PIN 		& Description    & Levels 	& Unit  \\ \hline
    VCC (10) 	& Supply         & 5 V    	& -		\\ \hline
    GND (11) 	& Ground         & Ground  	& -		\\ \hline
    PB5	(06)	& SPI MOSI		 & 0 - 5 V  & Screen \\ \hline
    PB7 (08)	& SPI CLK		 & 0 - 5 V  & Screen \\ \hline
    PC0 (22) 	& I2C Clock line & 0 - 5 V 	& Magnetometer 	\\ \hline
    PC1 (23) 	& I2C Data line  & 0 - 5 V 	& Magnetometer		\\ \hline
    PD0 (14)	& UART RXD		 & 0 - 5 V	& GPS module \\ \hline
    \end{tabular}
\end{table}

\subsection{Peripherals}
Logic levels are written as 0 - 5 V.\\

\textbf{The magnetometer:}\\
\begin{table}[H]
\centering
    \begin{tabular}{|l|l|l|}
    \hline
    PIN & Description    & Levels  \\ \hline
    SCL & I2C Clock line & 0 - 5 V \\ \hline
    SDA & I2C Data line  & 0 - 5 V \\ \hline
    VCC & Supply         & 5 V     \\ \hline
    GND & Ground         & Ground  \\ \hline
    \end{tabular}
\end{table}

\textbf{The screen:}\\
\begin{table}[H]
\centering
    \begin{tabular}{|l|l|l|}
    \hline
    PIN & Description    & Levels  \\ \hline
    CLK & SPI Clock line & 0 - 5 V \\ \hline
    DIN & Data in (or MOSI)  & 0 - 5 V \\ \hline
    VCC & Supply         & 3 V     \\ \hline
    GND & Ground         & Ground  \\ \hline
    D/C & Data or Command & 0 - 5 V \\ \hline
    CS  & Chip Select    & 0 - 5 V \\ \hline
    RST & Reset			 & 0 - 5 V \\ \hline
    LED & Background light on display & 3 V \\ \hline
    \end{tabular}
\end{table}

\textbf{The gps:}\\
\begin{table}[H]
\centering
    \begin{tabular}{|l|l|l|}
    \hline
    PIN & Description    & Levels  \\ \hline
    TX & UART transfer data  & 0 - 5 V \\ \hline
    VCC & Supply         & 5 V     \\ \hline
    GND & Ground         & Ground  \\ \hline
    \end{tabular}
\end{table}